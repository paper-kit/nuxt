import{C as z,b as i,M as C,Q as k,o as p,e as w,f as P,g as b,n as R,j as q,_ as A}from"./D-aeMYpJ.js";const B=["width","height"],F=z({__name:"PUConfetti",props:{active:{type:Boolean,default:!1},colors:{default:()=>["#1c1c1c"]},particleCount:{default:50},duration:{default:3e3},width:{default:400},height:{default:300},customClass:{default:""}},emits:["start","end"],setup(d,{emit:v}){const a=d,u=v,m=i(),r=i(),n=i(),s=i([]),l=i(0),_=C(()=>["pu-confetti",{"pu-confetti--active":a.active}]),g=()=>{const e=["circle","square","triangle"],t=e[Math.floor(Math.random()*e.length)];return{x:Math.random()*a.width,y:-10,vx:(Math.random()-.5)*8,vy:Math.random()*3+2,rotation:Math.random()*360,rotationSpeed:(Math.random()-.5)*10,color:a.colors[Math.floor(Math.random()*a.colors.length)],size:Math.random()*8+4,type:t}},y=(e,t)=>{switch(e.save(),e.translate(t.x,t.y),e.rotate(t.rotation*Math.PI/180),e.fillStyle=t.color,e.strokeStyle=t.color,e.lineWidth=1,t.type){case"circle":e.beginPath(),e.arc(0,0,t.size/2,0,Math.PI*2),e.fill();break;case"square":e.fillRect(-t.size/2,-t.size/2,t.size,t.size);break;case"triangle":e.beginPath(),e.moveTo(0,-t.size/2),e.lineTo(-t.size/2,t.size/2),e.lineTo(t.size/2,t.size/2),e.closePath(),e.fill();break}e.restore()},f=e=>{if(!r.value)return;const t=r.value.getContext("2d");if(!t)return;l.value||(l.value=e);const h=(e-l.value)/a.duration;t.clearRect(0,0,a.width,a.height),s.value.forEach((o,M)=>{o.x+=o.vx,o.y+=o.vy,o.rotation+=o.rotationSpeed,o.vy+=.1,y(t,o),(o.y>a.height+20||h>.8)&&s.value.splice(M,1)}),s.value.length>0&&h<1?n.value=requestAnimationFrame(f):u("end")},c=()=>{if(r.value){n.value&&cancelAnimationFrame(n.value),s.value=[],l.value=0;for(let e=0;e<a.particleCount;e++)s.value.push(g());u("start"),n.value=requestAnimationFrame(f)}};return k(()=>a.active,e=>{e&&c()}),p(()=>{a.active&&c()}),w(()=>{n.value&&cancelAnimationFrame(n.value)}),(e,t)=>(b(),P("div",{ref_key:"containerRef",ref:m,class:R(["pu-confetti font-patrick",[_.value,e.customClass]])},[q("canvas",{ref_key:"canvasRef",ref:r,class:"pu-confetti__canvas",width:e.width,height:e.height},null,8,B)],2))}}),T=Object.assign(A(F,[["__scopeId","data-v-964a7c94"]]),{__name:"PUConfetti"});export{T as _};
